<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>用cloudflare的api，关闭ipv6兼容性 | qklg</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="有时候有些莫名其妙的问题，其实关闭v6就能解决，但是 cloudflare的设置中的IPv6 兼容性开关是动不了的，需要20刀以上pro才能点 但">
<meta name="generator" content="Hugo 0.123.8">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

 
  







  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">←</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
		
  	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">用cloudflare的api，关闭ipv6兼容性</h1>

    <div class="tip">
        <time datetime="2023-06-30 13:28:40 &#43;0000 UTC">Jun 30, 2023</time>
        <span class="split">
          ·
        </span>
        <span>
          343 words
        </span>
        <span class="split">
          ·
        </span>
        <span>
          1 minute read
        </span>
    </div>

    
    
        
  


    


    <div class="content">
      <p>有时候有些莫名其妙的问题，其实关闭v6就能解决，但是
cloudflare的设置中的IPv6 兼容性开关是动不了的，需要20刀以上pro才能点
但是我们可以用api来关闭
参考cloudflare的<a href="https://developers.cloudflare.com/api/operations/zone-settings-change-i-pv6-setting" target="_blank" rel="noopener">文档</a>
需要用的三个参数，1区域id，2邮箱 3global api key
打开cf你的域名，域名那边有个域名区域id
<p class="markdown-image">
  <img src="https://testingcf.jsdelivr.net/gh/qklg/pic/webp/202310241329534.webp" alt=""  />
</p>
申请global api key
<a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" rel="noopener">https://dash.cloudflare.com/profile/api-tokens</a>
<p class="markdown-image">
  <img src="https://testingcf.jsdelivr.net/gh/qklg/pic/webp/202310241329519.webp" alt=""  />
</p></p>
<p>然后在linux上打以下命令,就可以关闭ipv6了，要打开的话就把off换成on就可以了</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>curl -X PATCH &#34;https://api.cloudflare.com/client/v4/zones/域名区域id/settings/ipv6&#34; \
</span></span><span style="display:flex;"><span>     -H &#34;X-Auth-Email: 你的cf邮箱&#34; \
</span></span><span style="display:flex;"><span>     -H &#34;X-Auth-Key:你的Global API Key&#34; \
</span></span><span style="display:flex;"><span>     -H &#34;Content-Type: application/json&#34; \
</span></span><span style="display:flex;"><span>     --data &#39;{&#34;value&#34;:&#34;off&#34;}&#39;
</span></span></code></pre></div><p>如果出现以下结果，就是成功了</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;errors&#34;: [],
</span></span><span style="display:flex;"><span>  &#34;messages&#34;: [],
</span></span><span style="display:flex;"><span>  &#34;success&#34;: true,
</span></span><span style="display:flex;"><span>  &#34;result&#34;: null
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
    </div>

    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
        qklg Hosted on   <a href="https://pages.cloudflare.com/" target="_blank">  Cloudflare Pages </a>
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-mini'>nodejh</a>
      </div>
    
</footer>



  </body>
</html>
