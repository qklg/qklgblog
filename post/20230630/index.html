<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="有时候有些莫名其妙的问题，其实关闭v6就能解决，但是
cloudflare的设置中的IPv6 兼容性开关是动不了的，需要20刀以上pro才能点
但是我们可以用api来关闭
参考cloudflare的文档
需要用的三个参数，1区域id，2邮箱 3global api key
打开cf你的域名，域名那边有个域名区域id

申请global api key
https://dash.cloudflare.com/profile/api-tokens
">  

  <title>
    
      用cloudflare的api，关闭ipv6兼容性
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.65ae318a1ec6e7795879f61af92fe7a407a4b2e59adeeb02b3892f4bf792ef7945c69626b1d0e0960725e3173c7d988b1ca729bac9d9c4b3e2117f20e01be3e0.css" integrity="sha512-Za4xih7G53lYefYa&#43;S/npAeksuWa3usCs4kvS/eS73lFxpYmsdDglgcl4xc8fZiLHKcpusnZxLPiEX8g4Bvj4A==" />
  
</head>
<body a="dark">
        <main class="page-content" aria-label="Content">
            <div class="w">
                <div class="post-meta">
                    <a href="/">..</a>

                    <p>
                        <time datetime="2023-06-30 13:28:40 &#43;0000 UTC">
                            2023-06-30
                        </time>
                    </p>
                </div>

<article>
    <h1>用cloudflare的api，关闭ipv6兼容性</h1>

    

    <p>有时候有些莫名其妙的问题，其实关闭v6就能解决，但是<br>
cloudflare的设置中的IPv6 兼容性开关是动不了的，需要20刀以上pro才能点<br>
但是我们可以用api来关闭<br>
参考cloudflare的<a href="https://developers.cloudflare.com/api/operations/zone-settings-change-i-pv6-setting">文档</a><br>
需要用的三个参数，1区域id，2邮箱 3global api key<br>
打开cf你的域名，域名那边有个域名区域id<br>
<img src="https://s3.qklg.net/img/202310241329534.png" alt=""><br>
申请global api key<br>
<a href="https://dash.cloudflare.com/profile/api-tokens">https://dash.cloudflare.com/profile/api-tokens</a><br>
<img src="https://s3.qklg.net/img/202310241329519.png" alt=""></p>
<p>然后在linux上打以下命令,就可以关闭ipv6了，要打开的话就把off换成on就可以了</p>
<pre tabindex="0"><code>curl -X PATCH &#34;https://api.cloudflare.com/client/v4/zones/域名区域id/settings/ipv6&#34; \
     -H &#34;X-Auth-Email: 你的cf邮箱&#34; \
     -H &#34;X-Auth-Key:你的Global API Key&#34; \
     -H &#34;Content-Type: application/json&#34; \
     --data &#39;{&#34;value&#34;:&#34;off&#34;}&#39;
</code></pre><p>如果出现以下结果，就是成功了</p>
<pre tabindex="0"><code>{
  &#34;errors&#34;: [],
  &#34;messages&#34;: [],
  &#34;success&#34;: true,
  &#34;result&#34;: null
}
</code></pre>
</article>

            </div>
        </main>
    </body></html>
